{"version":3,"file":"js/475.126df184.js","mappings":"qMAIMA,EAAa,CAAEC,IAAK,GACpBC,EAAa,CAAEC,MAAO,WACtBC,EAAa,CAAED,MAAO,WACtBE,EAAa,CAAC,WAAY,WAC1BC,EAAa,CAAC,WACdC,EAAa,CAAEJ,MAAO,UAQ5B,GAA4B,QAAiB,CAC3CK,OAAQ,aACRC,MAAA,SAAMC,GC2BR,IAAMC,GAAQ,UAGRC,GAAM,SAAS,WACnB,OAAAD,EAAME,MAAMC,OAAOC,KACfJ,EAAME,MAAMG,OACTC,OAAON,EAAMO,QAAQC,UACrBC,MAAK,SAACC,EAAuBC,GAC5B,OAAOD,EAAEE,OAASD,EAAEC,MACtB,IACFZ,EAAME,MAAMG,MANhB,IAUIQ,EAAW,CAAC,eAAgB,cAAe,UAAW,WDvB5D,OAAO,SAACC,EAAUC,GAChB,OAAQ,WAAc,QAAoB,KAAW,KAAM,CACpC,GAApBd,EAAIe,MAAMC,SACN,WAAc,QAAoB,MAAO5B,EAAY,6BACtD,QAAoB,IAAI,KAC3B,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYY,EAAIe,OAAO,SAACE,EAAOC,GACrF,OAAQ,WAAc,QAAoB,MAAO,CAC/C7B,IAAK6B,EACL3B,MAAO,SACN,EACD,QAAoB,MAAOD,EAAY,GACpC,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAY2B,EAAMf,QAAQ,SAACiB,EAAKC,GACtF,OAAQ,WAAc,QAAoB,MAAO,CAAE/B,IAAK+B,GAAU,EAChE,QAAoB,IAAK,KAAM,MAAO,QAAiBD,EAAIE,OAAQ,IACnE,QAAiB,MAAO,QAAiBF,EAAIG,OAAS,OAAQ,QAAiBH,EAAII,OAAS,KAAM,IAEtG,IAAI,SAEN,QAAoB,MAAO/B,EAAY,EACrC,QAAoB,SAAU,KAAM,WAAY,SAAiB,QAAO,IAAP,CAAkByB,EAAMO,MAAQ,KAAM,GACtF,GAAhBP,EAAMN,SACF,WAAc,QAAoB,SAAU,CAC3CtB,IAAK,EACLE,MAAO,UACPkC,QAASX,EAAO,KAAOA,EAAO,GAAK,SAACY,GAAgB,OAAC,QAAO3B,GAAO4B,SAAS,WAAxB,IACnD,kBACc,GAAhBV,EAAMN,SACJ,WAAc,QAAoB,SAAU,CAC3CtB,IAAK,EACLuC,SAAUX,EAAMO,KAAM,QAAOzB,GAAOE,MAAM4B,KAAKC,MAC/CL,QAAS,SAACC,GAAgB,OAAC,QAAO3B,GAAO4B,SAAS,WAAYV,EAAMc,GAA1C,EAC1BxC,MAAO,WACN,aAAc,EAAGE,KACpB,QAAoB,IAAI,GACb,GAAhBwB,EAAMN,SACF,WAAc,QAAoB,SAAU,CAC3CtB,IAAK,EACLoC,QAAS,SAACC,GAAgB,OAAC,QAAO3B,GAAO4B,SAAS,cAAeV,EAAMc,GAA7C,GACzB,aAAc,EAAGrC,KACpB,QAAoB,IAAI,MAE9B,QAAoB,MAAOC,EAAY,EACrC,QAAoB,OAAQ,CAC1BJ,OAAO,QAAgB,eAAQ0B,EAAMN,WACpC,QAAiBC,EAASK,EAAMN,SAAU,MAGnD,IAAI,OACH,GACL,CACA,I,SEjFA,MAAMqB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://test2/./src/views/OrdersView.vue?8d3b","webpack://test2/./src/views/OrdersView.vue","webpack://test2/./src/views/OrdersView.vue?e537"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-48b3bfb6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"product\" }\nconst _hoisted_3 = { class: \"actions\" }\nconst _hoisted_4 = [\"disabled\", \"onClick\"]\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"status\" }\n\nimport { computed } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { formatNum } from \"@/utils\";\n\n// Хранилище\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'OrdersView',\n  setup(__props) {\n\nconst store = useStore();\n\n// Получение списка заказов из хранилища + формирование заказа из корзины\nconst res = computed(() =>\n  store.state.basket.size\n    ? store.state.orders\n        .concat(store.getters.curOrder)\n        .sort((a: { status: number }, b: { status: number }) => {\n          return a.status - b.status;\n        })\n    : store.state.orders\n);\n\n// Статусы для расшифровки\nconst statuses = [\"Формирование\", \"Сформирован\", \"Оплачен\", \"Отменен\"];\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (res.value.length == 0)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"У вас пока нет заказов.\"))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(res.value, (order, indexO) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        key: indexO,\n        class: \"order\"\n      }, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(order.basket, (pos, indexB) => {\n            return (_openBlock(), _createElementBlock(\"div\", { key: indexB }, [\n              _createElementVNode(\"b\", null, \"- \" + _toDisplayString(pos.title), 1),\n              _createTextVNode(\" (\" + _toDisplayString(pos.count) + \" x \" + _toDisplayString(pos.price) + \") \", 1)\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"strong\", null, \"Сумма: \" + _toDisplayString(_unref(formatNum)(order.sum)) + \" ₽\", 1),\n          (order.status == 0)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                class: \"pinkbtn\",\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(store).dispatch('addOrder')))\n              }, \" Подтвердить \"))\n            : (order.status == 1)\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 1,\n                  disabled: order.sum > _unref(store).state.user.money,\n                  onClick: ($event: any) => (_unref(store).dispatch('payOrder', order.id)),\n                  class: \"pinkbtn\"\n                }, \" Оплатить \", 8, _hoisted_4))\n              : _createCommentVNode(\"\", true),\n          (order.status != 3)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                onClick: ($event: any) => (_unref(store).dispatch('cancelOrder', order.id))\n              }, \" Отменить \", 8, _hoisted_5))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createElementVNode(\"span\", {\n            class: _normalizeClass(`color${order.status}`)\n          }, _toDisplayString(statuses[order.status]), 3)\n        ])\n      ]))\n    }), 128))\n  ], 64))\n}\n}\n\n})","<template>\n  <div v-if=\"res.length == 0\">У вас пока нет заказов.</div>\n\n  <div v-for=\"(order, indexO) in res\" :key=\"indexO\" class=\"order\">\n    <div class=\"product\">\n      <div v-for=\"(pos, indexB) in order.basket\" :key=\"indexB\">\n        <b>- {{ pos.title }}</b> ({{ pos.count }} x {{ pos.price }})\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <strong>Сумма: {{ formatNum(order.sum) }} ₽</strong>\n      <button\n        class=\"pinkbtn\"\n        v-if=\"order.status == 0\"\n        @click=\"store.dispatch('addOrder')\"\n      >\n        Подтвердить\n      </button>\n      <button\n        v-else-if=\"order.status == 1\"\n        :disabled=\"order.sum > store.state.user.money\"\n        @click=\"store.dispatch('payOrder', order.id)\"\n        class=\"pinkbtn\"\n      >\n        Оплатить\n      </button>\n      <button\n        v-if=\"order.status != 3\"\n        @click=\"store.dispatch('cancelOrder', order.id)\"\n      >\n        Отменить\n      </button>\n    </div>\n    <div class=\"status\">\n      <span :class=\"`color${order.status}`\">{{ statuses[order.status] }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { formatNum } from \"@/utils\";\n\n// Хранилище\nconst store = useStore();\n\n// Получение списка заказов из хранилища + формирование заказа из корзины\nconst res = computed(() =>\n  store.state.basket.size\n    ? store.state.orders\n        .concat(store.getters.curOrder)\n        .sort((a: { status: number }, b: { status: number }) => {\n          return a.status - b.status;\n        })\n    : store.state.orders\n);\n\n// Статусы для расшифровки\nconst statuses = [\"Формирование\", \"Сформирован\", \"Оплачен\", \"Отменен\"];\n</script>\n\n<style scoped>\n.order {\n  width: 60vw;\n  display: grid;\n  align-items: center;\n  grid-template-columns: 3fr 1.5fr 1fr;\n  grid-column-gap: 10px;\n  background-color: white;\n  padding: 10px;\n  margin-top: 15px;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  border-radius: 10px;\n}\n\n.product {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: flex-start;\n\n  div {\n    font-size: 0.8em;\n  }\n}\n\n.price {\n  font-weight: bold;\n  margin-left: 10px;\n  white-space: nowrap;\n}\n\n.status {\n  text-align: right;\n\n  span {\n    padding: 5px 10px;\n    border-radius: 10px;\n\n    &.color1 {\n      background-color: orange;\n    }\n    &.color2 {\n      background-color: rgb(76, 164, 92);\n      color: white;\n    }\n    &.color3 {\n      background-color: #fc5a5a;\n      color: white;\n    }\n  }\n}\n\n.actions {\n  display: flex;\n  flex-direction: column;\n  margin-left: auto;\n  align-items: center;\n  justify-content: center;\n  grid-gap: 5px;\n  padding: 0 10px;\n\n  /* strong {\n    white-space: nowrap;\n  } */\n}\n</style>\n","import script from \"./OrdersView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OrdersView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./OrdersView.vue?vue&type=style&index=0&id=48b3bfb6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-48b3bfb6\"]])\n\nexport default __exports__"],"names":["_hoisted_1","key","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","__name","setup","__props","store","res","state","basket","size","orders","concat","getters","curOrder","sort","a","b","status","statuses","_ctx","_cache","value","length","order","indexO","pos","indexB","title","count","price","sum","onClick","$event","dispatch","disabled","user","money","id","__exports__"],"sourceRoot":""}